{% extends 'base.html' %}

{% block content %}
<h1>Patient Information</h1>

{% if patient %}
    <h2>{{ patient[2] }} </h2> <!-- You can modify indices based on your database schema -->
    <h3>Appointment ID: {{ appt_id }}</h3>
    <form method="POST">
        <div>
            <label for="diagnosis">Diagnosis:</label>
            <input type="text" name="diagnosis" id="diagnosis" required>
        </div>
        <div>
            <label for="notes">Notes:</label>
            <textarea name="notes" id="notes" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>

    <h3>Past Diagnoses</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Date</th>
                <th>Diagnosis</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            {% for record in history %}
            <tr>
                <td>{{ record[5] }}</td> <!-- Assuming index 4 corresponds to date -->
                <td>{{ record[3] }}</td> <!-- Assuming index 3 corresponds to diagnosis -->
                <td>{{ record[4] }}</td> <!-- Assuming index 2 corresponds to notes -->
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Patient not found.</p>
{% endif %}
{% endblock %}