{% extends 'base.html' %}

{% block content %}
<h1>Staff Dashboard</h1>
<!-- Display Flash Messages -->
{% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
        {% for category, message in messages %}
            <div id="flash-message" class="alert alert-{{ 'success' if category == 'success' else 'danger' }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<<table class="table table-striped">
    <thead>
        <tr>
            <th>ApptID</th>
            <th>PatientID</th>
            <th>ApptDate</th>
            <th>ApptTime</th>
            <th>AppStatus</th>
            <th>AppReason</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for appointment in appointments %}
        <tr>
            <td>{{ appointment[0] }}</td>  <!-- ApptID -->
            <td>{{ appointment[1] }}</td>  <!-- PatientID -->
            <td>{{ appointment[2] }}</td>  <!-- ApptDate -->
            <td>{{ appointment[3] }}</td>  <!-- ApptTime -->
            <td>{{ appointment[4] }}</td>  <!-- AppStatus -->
            <td>{{ appointment[5] }}</td>  <!-- AppReason -->
            <td><a href="{{ url_for('view_patient', patient_id=appointment[1], appt_id=appointment[0]) }}" class="btn btn-primary">View
                Patient</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    // Hide the flash message after 3 seconds
    setTimeout(function() {
        const flashMessage = document.getElementById('flash-message');
        if (flashMessage) {
            flashMessage.style.display = 'none';
        }
    }, 3000);  // 3000 milliseconds = 3 seconds
</script>
{% endblock %}
